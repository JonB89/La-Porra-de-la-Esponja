<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Predicciones Champions con Penalizaciones</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f7fa;
            color: #333;
            line-height: 1.6;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: linear-gradient(135deg, #1e3c72, #2a5298);
            color: white;
            border-radius: 10px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        
        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
        }
        
        .subtitle {
            font-size: 1.2rem;
            opacity: 0.9;
        }
        
        .content {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: 30px;
        }
        
        @media (max-width: 1100px) {
            .content {
                grid-template-columns: 1fr;
            }
        }
        
        .card {
            background: white;
            border-radius: 10px;
            padding: 25px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }
        
        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.12);
        }
        
        .card h2 {
            color: #2a5298;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #eaeaea;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }
        
        th, td {
            padding: 12px 10px;
            text-align: center;
            border-bottom: 1px solid #eaeaea;
        }
        
        th {
            background-color: #f8f9fa;
            font-weight: 600;
            color: #2a5298;
        }
        
        tr:hover {
            background-color: #f8f9fa;
        }
        
        .match-date {
            background-color: #2a5298;
            color: white;
            font-weight: bold;
            text-align: center;
            padding: 8px;
            margin-top: 20px;
            border-radius: 5px;
        }
        
        .team-name {
            text-align: left;
            font-weight: 500;
        }
        
        .odds {
            font-weight: 600;
        }
        
        .low-odds {
            color: #e74c3c;
            font-weight: bold;
        }
        
        .penalty {
            background-color: #fff3cd;
            color: #856404;
            font-weight: bold;
            border-radius: 4px;
            padding: 2px 6px;
        }
        
        .instructions {
            background-color: #e8f4fd;
            border-left: 4px solid #2a5298;
            padding: 15px;
            margin-bottom: 20px;
            border-radius: 0 5px 5px 0;
        }
        
        .instructions h3 {
            margin-bottom: 10px;
            color: #2a5298;
        }
        
        footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px;
            color: #6c757d;
            font-size: 0.9rem;
        }
        
        .highlight {
            background-color: #fff3cd;
            padding: 2px 5px;
            border-radius: 3px;
        }
        
        input {
            width: 50px;
            padding: 5px;
            text-align: center;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        
        .result-cell {
            min-width: 80px;
        }
        
        .acierto-exacto {
            background-color: #d4edda;
            color: #155724;
            font-weight: bold;
        }
        
        .acierto-1x2 {
            background-color: #fff3cd;
            color: #856404;
            font-weight: bold;
        }
        
        .fallo {
            background-color: #f8d7da;
            color: #721c24;
            font-weight: bold;
        }
        
        .puntos {
            font-weight: bold;
            font-size: 1.1em;
        }
        
        .controls {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }
        
        button {
            background-color: #2a5298;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1rem;
            transition: background-color 0.3s;
        }
        
        button:hover {
            background-color: #1e3c72;
        }
        
        .total-points {
            text-align: center;
            margin-top: 20px;
            padding: 15px;
            background-color: #e8f4fd;
            border-radius: 5px;
            font-size: 1.2rem;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Predicciones Champions League</h1>
            <p class="subtitle">Jornada 2 - Sistema completo con penalizaciones</p>
        </header>
        
        <div class="instructions">
            <h3>Instrucciones</h3>
            <p>1. Introduce tu predicción en formato "golesLocal-golesVisitante" (ej: 2-1)</p>
            <p>2. Cuando se conozca el resultado, introdúcelo en la columna "Resultado Real"</p>
            <p>3. Haz clic en "Calcular Puntos" para ver tus aciertos y puntuación</p>
            <p>4. <span class="highlight">Acierto Exacto</span>: 12 puntos | <span class="highlight">Acierto 1X2</span>: 8 puntos | <span class="highlight">Fallo</span>: Penalización o 0 puntos</p>
        </div>
        
        <div class="content">
            <div class="card">
                <h2>Partidos de la Champions League</h2>
                
                <div class="match-date">30 Septiembre 2025 - Fase de Liga</div>
                <table id="matches-table">
                    <thead>
                        <tr>
                            <th>Hora</th>
                            <th>Partido</th>
                            <th>Cuotas</th>
                            <th>Mi Predicción</th>
                            <th>Resultado Real</th>
                            <th>Acierto</th>
                            <th>Puntos</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Los partidos se cargarán aquí mediante JavaScript -->
                    </tbody>
                </table>
                
                <div class="controls">
                    <button id="calculate-btn">Calcular Puntos</button>
                    <button id="clear-btn">Limpiar Datos</button>
                    <button id="save-btn">Guardar Predicciones</button>
                </div>
                
                <div class="total-points" id="total-points">
                    Puntuación Total: <span id="points-value">0</span> puntos
                </div>
            </div>
            
            <div class="card">
                <h2>Tabla de Penalizaciones</h2>
                <table>
                    <thead>
                        <tr>
                            <th>Cotización</th>
                            <th>Penalización</th>
                            <th>Cotización</th>
                            <th>Penalización</th>
                            <th>Cotización</th>
                            <th>Penalización</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td>Hasta 1.10</td><td class="penalty">-82</td><td>1.40</td><td class="penalty">-16</td><td>1.70</td><td class="penalty">-7</td></tr>
                        <tr><td>1.11</td><td class="penalty">-74</td><td>1.41</td><td class="penalty">-16</td><td>1.71</td><td class="penalty">-7</td></tr>
                        <tr><td>1.12</td><td class="penalty">-68</td><td>1.42</td><td class="penalty">-15</td><td>1.72</td><td class="penalty">-7</td></tr>
                        <tr><td>1.13</td><td class="penalty">-62</td><td>1.43</td><td class="penalty">-15</td><td>1.73</td><td class="penalty">-6</td></tr>
                        <tr><td>1.14</td><td class="penalty">-57</td><td>1.44</td><td class="penalty">-14</td><td>1.74</td><td class="penalty">-6</td></tr>
                        <tr><td>1.15</td><td class="penalty">-53</td><td>1.45</td><td class="penalty">-14</td><td>1.75</td><td class="penalty">-6</td></tr>
                        <tr><td>1.16</td><td class="penalty">-49</td><td>1.46</td><td class="penalty">-13</td><td>1.76</td><td class="penalty">-6</td></tr>
                        <tr><td>1.17</td><td class="penalty">-46</td><td>1.47</td><td class="penalty">-13</td><td>1.77</td><td class="penalty">-6</td></tr>
                        <tr><td>1.18</td><td class="penalty">-43</td><td>1.48</td><td class="penalty">-13</td><td>1.78</td><td class="penalty">-6</td></tr>
                        <tr><td>1.19</td><td class="penalty">-41</td><td>1.49</td><td class="penalty">-12</td><td>1.79</td><td class="penalty">-5</td></tr>
                        <tr><td>1.20</td><td class="penalty">-38</td><td>1.50</td><td class="penalty">-12</td><td>1.80</td><td class="penalty">-5</td></tr>
                        <tr><td>1.21</td><td class="penalty">-36</td><td>1.51</td><td class="penalty">-12</td><td>1.81</td><td class="penalty">-5</td></tr>
                        <tr><td>1.22</td><td class="penalty">-34</td><td>1.52</td><td class="penalty">-11</td><td>1.82</td><td class="penalty">-5</td></tr>
                        <tr><td>1.23</td><td class="penalty">-33</td><td>1.53</td><td class="penalty">-11</td><td>1.83</td><td class="penalty">-5</td></tr>
                        <tr><td>1.24</td><td class="penalty">-31</td><td>1.54</td><td class="penalty">-11</td><td>1.84</td><td class="penalty">-5</td></tr>
                        <tr><td>1.25</td><td class="penalty">-29</td><td>1.55</td><td class="penalty">-10</td><td>1.85</td><td class="penalty">-5</td></tr>
                        <tr><td>1.26</td><td class="penalty">-28</td><td>1.56</td><td class="penalty">-10</td><td>1.86</td><td class="penalty">-5</td></tr>
                        <tr><td>1.27</td><td class="penalty">-27</td><td>1.57</td><td class="penalty">-10</td><td>1.87</td><td class="penalty">-4</td></tr>
                        <tr><td>1.28</td><td class="penalty">-26</td><td>1.58</td><td class="penalty">-9</td><td>1.88</td><td class="penalty">-4</td></tr>
                        <tr><td>1.29</td><td class="penalty">-25</td><td>1.59</td><td class="penalty">-9</td><td>1.89</td><td class="penalty">-4</td></tr>
                        <tr><td>1.30</td><td class="penalty">-24</td><td>1.60</td><td class="penalty">-9</td><td>1.90</td><td class="penalty">-4</td></tr>
                        <tr><td>1.31</td><td class="penalty">-23</td><td>1.61</td><td class="penalty">-9</td><td>1.91</td><td class="penalty">-4</td></tr>
                        <tr><td>1.32</td><td class="penalty">-22</td><td>1.62</td><td class="penalty">-8</td><td>1.92</td><td class="penalty">-4</td></tr>
                        <tr><td>1.33</td><td class="penalty">-21</td><td>1.63</td><td class="penalty">-8</td><td>1.93</td><td class="penalty">-4</td></tr>
                        <tr><td>1.34</td><td class="penalty">-20</td><td>1.64</td><td class="penalty">-8</td><td>1.94</td><td class="penalty">-4</td></tr>
                        <tr><td>1.35</td><td class="penalty">-19</td><td>1.65</td><td class="penalty">-8</td><td>1.95</td><td class="penalty">-4</td></tr>
                        <tr><td>1.36</td><td class="penalty">-19</td><td>1.66</td><td class="penalty">-8</td><td>1.96</td><td class="penalty">-3</td></tr>
                        <tr><td>1.37</td><td class="penalty">-18</td><td>1.67</td><td class="penalty">-7</td><td>1.97</td><td class="penalty">-3</td></tr>
                        <tr><td>1.38</td><td class="penalty">-17</td><td>1.68</td><td class="penalty">-7</td><td>1.98</td><td class="penalty">-3</td></tr>
                        <tr><td>1.39</td><td class="penalty">-17</td><td>1.69</td><td class="penalty">-7</td><td>1.99</td><td class="penalty">-3</td></tr>
                    </tbody>
                </table>
                
                <div style="margin-top: 20px; padding: 15px; background-color: #f8f9fa; border-radius: 5px;">
                    <h3>¿Cómo funciona el sistema de penalizaciones?</h3>
                    <p>Cuando una cuota es inferior a 2.00, se aplica una penalización según la tabla.</p>
                    <p>Si fallas un partido con cuota baja, se resta la penalización de tu puntuación total.</p>
                    <p>Si aciertas el 1X2, obtienes 8 puntos. Si aciertas el resultado exacto, obtienes 12 puntos.</p>
                </div>
            </div>
        </div>
        
        <footer>
            <p>Sistema de Predicciones Champions League &copy; 2025 - Con penalizaciones por cuotas bajas</p>
        </footer>
    </div>

    <script>
        // Datos de los partidos
        const matches = [
            // 30 de septiembre
            { date: "30 Sep 2025", time: "18:45", home: "Atalanta", away: "Club Brugge KV", odds1: 1.88, oddsX: 3.85, odds2: 3.79 },
            { date: "30 Sep 2025", time: "18:45", home: "Kairat Almaty", away: "Real Madrid", odds1: 23.90, oddsX: 9.78, odds2: 1.10 },
            { date: "30 Sep 2025", time: "21:00", home: "Atl. Madrid", away: "Eintracht Frankfurt", odds1: 1.61, oddsX: 4.25, odds2: 5.10 },
            { date: "30 Sep 2025", time: "21:00", home: "Bodo/Gilmt", away: "Tottenham", odds1: 3.09, oddsX: 3.81, odds2: 2.14 },
            { date: "30 Sep 2025", time: "21:00", home: "Chelsea", away: "Benfica", odds1: 1.58, oddsX: 4.21, odds2: 5.41 },
            { date: "30 Sep 2025", time: "21:00", home: "Galatasaray", away: "Liverpool", odds1: 4.55, oddsX: 4.50, odds2: 1.63 },
            { date: "30 Sep 2025", time: "21:00", home: "Inter", away: "Slavia Prague", odds1: 1.35, oddsX: 5.32, odds2: 8.03 },
            { date: "30 Sep 2025", time: "21:00", home: "Marseille", away: "Ajax", odds1: 1.53, oddsX: 4.49, odds2: 5.63 },
            { date: "30 Sep 2025", time: "21:00", home: "Pafos", away: "Bayern Munich", odds1: 19.75, oddsX: 8.53, odds2: 1.13 },
            
            // 1 de octubre
            { date: "01 Oct 2025", time: "18:45", home: "Qarabag", away: "FC Copenhagen", odds1: 1.00, oddsX: 2.00, odds2: 2.00 },
            { date: "01 Oct 2025", time: "18:45", home: "Royale Union SG", away: "Newcastle", odds1: 2.73, oddsX: 3.45, odds2: 2.51 },
            { date: "01 Oct 2025", time: "21:00", home: "Arsenal", away: "Olympiacos Piraeus", odds1: 3.20, oddsX: 3.61, odds2: 2.15 },
            { date: "01 Oct 2025", time: "21:00", home: "Barcelona", away: "PSG", odds1: 1.22, oddsX: 6.29, odds2: 13.44 },
            { date: "01 Oct 2025", time: "21:00", home: "Bayer Leverkusen", away: "PSV", odds1: 1.94, oddsX: 4.04, odds2: 3.42 },
            { date: "01 Oct 2025", time: "21:00", home: "Dortmund", away: "Ath Bilbao", odds1: 1.85, oddsX: 4.01, odds2: 3.80 },
            { date: "01 Oct 2025", time: "21:00", home: "Monaco", away: "Manchester City", odds1: 1.83, oddsX: 3.73, odds2: 4.19 },
            { date: "01 Oct 2025", time: "21:00", home: "Napoli", away: "Sporting CP", odds1: 5.91, oddsX: 4.65, odds2: 1.49 },
            { date: "01 Oct 2025", time: "21:00", home: "Villarreal", away: "Juventus", odds1: 1.82, oddsX: 3.71, odds2: 4.25 }
        ];

        // Tabla de penalizaciones
        const penaltyTable = {
            "1.10": -82, "1.11": -74, "1.12": -68, "1.13": -62, "1.14": -57, "1.15": -53,
            "1.16": -49, "1.17": -46, "1.18": -43, "1.19": -41, "1.20": -38, "1.21": -36,
            "1.22": -34, "1.23": -33, "1.24": -31, "1.25": -29, "1.26": -28, "1.27": -27,
            "1.28": -26, "1.29": -25, "1.30": -24, "1.31": -23, "1.32": -22, "1.33": -21,
            "1.34": -20, "1.35": -19, "1.36": -19, "1.37": -18, "1.38": -17, "1.39": -17,
            "1.40": -16, "1.41": -16, "1.42": -15, "1.43": -15, "1.44": -14, "1.45": -14,
            "1.46": -13, "1.47": -13, "1.48": -13, "1.49": -12, "1.50": -12, "1.51": -12,
            "1.52": -11, "1.53": -11, "1.54": -11, "1.55": -10, "1.56": -10, "1.57": -10,
            "1.58": -9, "1.59": -9, "1.60": -9, "1.61": -9, "1.62": -8, "1.63": -8,
            "1.64": -8, "1.65": -8, "1.66": -8, "1.67": -7, "1.68": -7, "1.69": -7,
            "1.70": -7, "1.71": -7, "1.72": -7, "1.73": -6, "1.74": -6, "1.75": -6,
            "1.76": -6, "1.77": -6, "1.78": -6, "1.79": -5, "1.80": -5, "1.81": -5,
            "1.82": -5, "1.83": -5, "1.84": -5, "1.85": -5, "1.86": -5, "1.87": -4,
            "1.88": -4, "1.89": -4, "1.90": -4, "1.91": -4, "1.92": -4, "1.93": -4,
            "1.94": -4, "1.95": -4, "1.96": -3, "1.97": -3, "1.98": -3, "1.99": -3
        };

        // Función para obtener la penalización de una cuota
        function getPenalty(odd) {
            if (odd >= 2.0) return 0;
            
            // Buscar la penalización correspondiente
            const oddKey = Object.keys(penaltyTable).find(key => odd <= parseFloat(key));
            return penaltyTable[oddKey] || 0;
        }

        // Función para determinar el resultado (1, X, 2)
        function getResult(goalsHome, goalsAway) {
            if (goalsHome > goalsAway) return '1';
            if (goalsHome < goalsAway) return '2';
            return 'X';
        }

        // Función para analizar un marcador
        function parseScore(scoreStr) {
            if (!scoreStr) return null;
            
            const parts = scoreStr.split('-');
            if (parts.length !== 2) return null;
            
            const home = parseInt(parts[0].trim());
            const away = parseInt(parts[1].trim());
            
            if (isNaN(home) || isNaN(away)) return null;
            
            return { home, away };
        }

        // Función para calcular los puntos de un partido
        function calculateMatchPoints(predictionStr, resultStr, odds1, oddsX, odds2) {
            const prediction = parseScore(predictionStr);
            const result = parseScore(resultStr);
            
            if (!prediction || !result) return { type: "", points: 0 };
            
            // Comprobar acierto exacto
            if (prediction.home === result.home && prediction.away === result.away) {
                return { type: "Acierto Exacto", points: 12 };
            }
            
            // Comprobar acierto 1X2
            const predResult = getResult(prediction.home, prediction.away);
            const actualResult = getResult(result.home, result.away);
            
            if (predResult === actualResult) {
                return { type: "Acierto 1X2", points: 8 };
            }
            
            // Fallo - aplicar penalización según la cuota seleccionada
            let selectedOdd;
            if (predResult === '1') selectedOdd = odds1;
            else if (predResult === 'X') selectedOdd = oddsX;
            else selectedOdd = odds2;
            
            const penalty = getPenalty(selectedOdd);
            return { type: "Fallo", points: penalty };
        }

        // Función para cargar los partidos en la tabla
        function loadMatches() {
            const tbody = document.querySelector("#matches-table tbody");
            tbody.innerHTML = "";
            
            let currentDate = "";
            
            matches.forEach((match, index) => {
                // Añadir fecha si cambia
                if (match.date !== currentDate) {
                    currentDate = match.date;
                    const dateRow = document.createElement("tr");
                    dateRow.innerHTML = `<td colspan="7" class="match-date">${match.date} - Fase de Liga</td>`;
                    tbody.appendChild(dateRow);
                }
                
                // Crear fila del partido
                const row = document.createElement("tr");
                row.innerHTML = `
                    <td>${match.time}</td>
                    <td class="team-name">${match.home} vs ${match.away}</td>
                    <td>
                        <span class="${match.odds1 < 2 ? 'low-odds' : ''}">${match.odds1}</span> / 
                        <span>${match.oddsX}</span> / 
                        <span class="${match.odds2 < 2 ? 'low-odds' : ''}">${match.odds2}</span>
                    </td>
                    <td class="result-cell">
                        <input type="text" id="pred-${index}" placeholder="0-0" maxlength="5">
                    </td>
                    <td class="result-cell">
                        <input type="text" id="real-${index}" placeholder="0-0" maxlength="5">
                    </td>
                    <td id="type-${index}" class="result-type"></td>
                    <td id="points-${index}" class="puntos"></td>
                `;
                
                tbody.appendChild(row);
            });
            
            // Cargar datos guardados
            loadSavedData();
        }

        // Función para calcular todos los puntos
        function calculateAllPoints() {
            let totalPoints = 0;
            
            matches.forEach((match, index) => {
                const predictionInput = document.getElementById(`pred-${index}`);
                const resultInput = document.getElementById(`real-${index}`);
                const typeCell = document.getElementById(`type-${index}`);
                const pointsCell = document.getElementById(`points-${index}`);
                
                const prediction = predictionInput.value;
                const result = resultInput.value;
                
                const { type, points } = calculateMatchPoints(prediction, result, match.odds1, match.oddsX, match.odds2);
                
                // Actualizar celdas
                typeCell.textContent = type;
                pointsCell.textContent = points;
                
                // Aplicar estilos según el tipo de acierto
                typeCell.className = "result-type";
                pointsCell.className = "puntos";
                
                if (type === "Acierto Exacto") {
                    typeCell.classList.add("acierto-exacto");
                    pointsCell.classList.add("acierto-exacto");
                } else if (type === "Acierto 1X2") {
                    typeCell.classList.add("acierto-1x2");
                    pointsCell.classList.add("acierto-1x2");
                } else if (type === "Fallo") {
                    typeCell.classList.add("fallo");
                    pointsCell.classList.add("fallo");
                }
                
                totalPoints += points;
            });
            
            // Actualizar total
            document.getElementById("points-value").textContent = totalPoints;
            
            // Guardar datos
            saveData();
        }

        // Función para guardar datos en localStorage
        function saveData() {
            const data = matches.map((match, index) => {
                return {
                    pred: document.getElementById(`pred-${index}`).value,
                    real: document.getElementById(`real-${index}`).value
                };
            });
            
            localStorage.setItem("championsPredictions", JSON.stringify(data));
        }

        // Función para cargar datos guardados
        function loadSavedData() {
            const savedData = localStorage.getItem("championsPredictions");
            
            if (savedData) {
                const data = JSON.parse(savedData);
                
                data.forEach((item, index) => {
                    const predInput = document.getElementById(`pred-${index}`);
                    const realInput = document.getElementById(`real-${index}`);
                    
                    if (predInput) predInput.value = item.pred || "";
                    if (realInput) realInput.value = item.real || "";
                });
            }
        }

        // Función para limpiar todos los datos
        function clearAllData() {
            if (confirm("¿Estás seguro de que quieres limpiar todas las predicciones y resultados?")) {
                matches.forEach((match, index) => {
                    const predInput = document.getElementById(`pred-${index}`);
                    const realInput = document.getElementById(`real-${index}`);
                    const typeCell = document.getElementById(`type-${index}`);
                    const pointsCell = document.getElementById(`points-${index}`);
                    
                    if (predInput) predInput.value = "";
                    if (realInput) realInput.value = "";
                    if (typeCell) typeCell.textContent = "";
                    if (pointsCell) pointsCell.textContent = "";
                    
                    typeCell.className = "result-type";
                    pointsCell.className = "puntos";
                });
                
                document.getElementById("points-value").textContent = "0";
                
                localStorage.removeItem("championsPredictions");
            }
        }

        // Inicializar la página
        document.addEventListener("DOMContentLoaded", function() {
            loadMatches();
            
            // Asignar eventos a los botones
            document.getElementById("calculate-btn").addEventListener("click", calculateAllPoints);
            document.getElementById("clear-btn").addEventListener("click", clearAllData);
            document.getElementById("save-btn").addEventListener("click", saveData);
            
            // Guardar automáticamente cuando se modifiquen los inputs
            document.querySelectorAll("input").forEach(input => {
                input.addEventListener("input", saveData);
            });
        });
    </script>
</body>
</html>
